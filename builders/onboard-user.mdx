---
title: "Create User"
description: "Create a new end-user for your builder application."
---

`POST /api/v1/builder/users`

Creates a new end-user under your builder account.
**Idempotent** — calling again with the same `external_id` returns the existing user.

<Info>
All builder requests use **impersonation**: your builder API key authenticates
the request, and the `X-Builder-Customer-Id` header identifies the end-user.
Your users never see your builder key — authentication happens entirely on your backend.
</Info>

## Parameters

<ParamField body="external_id" type="string" required>
  Your app's internal user ID. Creates a new user if not found (idempotent).
</ParamField>

<ParamField body="email" type="string">
  User's email (used for Privy account creation).
</ParamField>

<ParamField body="qps_limit" type="number">
  Per-user rate limit (must be >= 1, draws from your QPS pool).
</ParamField>

<ParamField body="eoa_address" type="string">
  User's external wallet address (42-char hex, `0x`-prefixed). Validated on create but no
  wallet record is written — pass it again during onboard to create a Safe wallet.
</ParamField>

## Response

<ResponseField name="customer_id" type="string">
  Parsec customer UUID.
</ResponseField>

<ResponseField name="external_id" type="string">
  Your app's internal user ID (echoed back).
</ResponseField>

<ResponseField name="api_key" type="string">
  End-user's Parsec API key. Store this securely — it is returned on every call (idempotent).
</ResponseField>

<ResponseField name="status" type="string">
  `"complete"` on success.
</ResponseField>

<ResponseField name="linked_exchanges" type="string[]">
  Exchanges the user is onboarded to (empty for new users).
</ResponseField>

<ResponseField name="wallet" type="object | null">
  Wallet info. Present if user has a wallet.
  <Expandable title="properties">
    <ResponseField name="eoa_address" type="string">
      EOA wallet address.
    </ResponseField>
    <ResponseField name="privy_wallet_id" type="string">
      Privy wallet identifier.
    </ResponseField>
    <ResponseField name="safe_address" type="string | null">
      Safe wallet address. Only present for `wallet_type: "safe"`.
    </ResponseField>
    <ResponseField name="wallet_type" type="string">
      `"eoa"` or `"safe"`.
    </ResponseField>
    <ResponseField name="chain_id" type="number | null">
      Chain ID.
    </ResponseField>
    <ResponseField name="created_at" type="string | null">
      RFC 3339 timestamp.
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="fee_escrow_enabled" type="boolean">
  Whether fee escrow is active.
</ResponseField>

<ResponseField name="fee_bps" type="number | null">
  Fee basis points (builder-level setting).
</ResponseField>

<ResponseField name="affiliate_address" type="string | null">
  Fee recipient address (builder-level setting).
</ResponseField>

<RequestExample>
```bash Create user with external wallet
curl -X POST "https://api.parsecapi.com/api/v1/builder/users" \
  -H "X-API-Key: pk_live_YOUR_BUILDER_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "external_id": "user_001",
    "email": "alice@example.com",
    "eoa_address": "0x1234567890abcdef1234567890abcdef12345678"
  }'
```
```bash Create user (no wallet)
curl -X POST "https://api.parsecapi.com/api/v1/builder/users" \
  -H "X-API-Key: pk_live_YOUR_BUILDER_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "external_id": "user_002",
    "email": "bob@example.com"
  }'
```
</RequestExample>

<ResponseExample>
```json New user with external wallet (201 Created)
{
  "customer_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "external_id": "user_001",
  "api_key": "pk_live_abc123def456",
  "status": "complete",
  "linked_exchanges": [],
  "wallet": null,
  "fee_escrow_enabled": false
}
```
```json New user without wallet (201 Created)
{
  "customer_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "external_id": "user_002",
  "api_key": "pk_live_abc123def456",
  "status": "complete",
  "linked_exchanges": [],
  "wallet": null,
  "fee_escrow_enabled": false
}
```
```json Existing user (200 OK)
{
  "customer_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "external_id": "user_001",
  "api_key": "pk_live_abc123def456",
  "status": "complete",
  "linked_exchanges": ["polymarket"],
  "wallet": {
    "eoa_address": "0x1234567890abcdef1234567890abcdef12345678",
    "privy_wallet_id": "",
    "safe_address": "0xabcdef1234567890abcdef1234567890abcdef12",
    "wallet_type": "safe",
    "chain_id": 137,
    "created_at": "2026-02-27T12:00:00Z"
  },
  "fee_escrow_enabled": false
}
```
</ResponseExample>

---

## Onboard User

`POST /api/v1/builder/onboard`

Onboard an existing end-user to an exchange. Thin wrapper around the [trader onboard endpoint](/api/onboard) with builder ownership verification.

There are three credential strategies for your end-users:

| Strategy | When to use | How |
|----------|-------------|-----|
| **Managed** | User doesn't have a wallet — Parsec creates one | `mode: "managed"` |
| **Self** | User has exchange API keys — Parsec stores them | `mode: "self"` |
| **Per-request** | User manages their own keys — nothing stored | Skip onboard, pass `X-Exchange-Credentials` per-request |

### Parameters

<ParamField body="customer_id" type="string" required>
  The end-user's Parsec customer UUID (must be owned by this builder).
</ParamField>

<ParamField body="exchange" type="string" required>
  `polymarket` or `kalshi`.
</ParamField>

<ParamField body="mode" type="string" required>
  `managed` or `self`.
</ParamField>

#### Managed mode fields

Used when `mode: "managed"` — Parsec creates a wallet and derives exchange credentials on behalf of the user.
Two mutually exclusive paths:
- **No external wallet**: `wallet_type: "eoa"` (default) — Parsec creates an embedded EOA.
- **External wallet**: `wallet_type: "safe"` + `eoa_address` — Parsec creates a Safe owned by the external address.

<ParamField body="wallet_type" type="string" default="eoa">
  `eoa` (default) — creates an embedded EOA wallet.
  `safe` — creates a Safe wallet (requires `eoa_address`).
</ParamField>

<ParamField body="eoa_address" type="string">
  External wallet address (42-char hex, `0x`-prefixed). Required when `wallet_type: "safe"`.
  Must not be provided when `wallet_type: "eoa"`.
</ParamField>

<ParamField body="chain_id" type="number" default="137">
  Chain ID for Safe wallet creation. Defaults to Polygon (137). Only used with `wallet_type: "safe"`.
</ParamField>

#### Self mode fields — Polymarket

Used when `mode: "self"` and `exchange: "polymarket"` — you provide the user's existing CLOB credentials.

<ParamField body="clob_api_key" type="string" required>
  CLOB API key.
</ParamField>

<ParamField body="clob_api_secret" type="string" required>
  CLOB API secret.
</ParamField>

<ParamField body="clob_api_passphrase" type="string" required>
  CLOB API passphrase.
</ParamField>

<ParamField body="private_key" type="string">
  Ethereum private key (`0x`-prefixed hex) for order signing. Optional — without it, only read operations (balance, positions) work.
</ParamField>

#### Self mode fields — Kalshi

Used when `mode: "self"` and `exchange: "kalshi"` — you provide the user's API key and RSA private key.

<ParamField body="api_key_id" type="string" required>
  Kalshi API key ID.
</ParamField>

<ParamField body="private_key" type="string" required>
  RSA private key in PEM format.
</ParamField>

### Response

<ResponseField name="customer_id" type="string">
  Parsec customer UUID.
</ResponseField>

<ResponseField name="exchange" type="string">
  Exchange that was onboarded.
</ResponseField>

<ResponseField name="mode" type="string">
  `managed` or `self`.
</ResponseField>

<ResponseField name="status" type="string">
  `"complete"` on success.
</ResponseField>

<ResponseField name="eoa_address" type="string | null">
  EOA wallet address. Present for managed mode.
</ResponseField>

<ResponseField name="safe_address" type="string | null">
  Safe wallet address. Present when `wallet_type: "safe"`.
</ResponseField>

<ResponseField name="linked_exchanges" type="string[]">
  Exchanges the user is onboarded to after this call.
</ResponseField>

<ResponseField name="steps_completed" type="string[]">
  Steps completed during this call. Possible values:
  - `wallet_eoa_created` — Managed EOA: embedded wallet created
  - `external_eoa_provided` — Managed Safe: external wallet address accepted
  - `wallet_safe_created` — Managed Safe: Safe wallet created
  - `exchange_linked` — Managed: CLOB credentials derived + approvals set
  - `credentials_validated` — Self Kalshi: PEM key validated
  - `credentials_stored` — Self: credentials stored
</ResponseField>

<ResponseField name="wallet" type="object | null">
  Wallet info. Present if user has a wallet.
  <Expandable title="properties">
    <ResponseField name="eoa_address" type="string">
      EOA wallet address.
    </ResponseField>
    <ResponseField name="privy_wallet_id" type="string">
      Privy wallet identifier.
    </ResponseField>
    <ResponseField name="safe_address" type="string | null">
      Safe wallet address. Only present for `wallet_type: "safe"`.
    </ResponseField>
    <ResponseField name="wallet_type" type="string">
      `"eoa"` or `"safe"`.
    </ResponseField>
    <ResponseField name="chain_id" type="number | null">
      Chain ID.
    </ResponseField>
    <ResponseField name="created_at" type="string | null">
      RFC 3339 timestamp.
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="fee_escrow_enabled" type="boolean">
  Whether fee escrow is active.
</ResponseField>

<ResponseField name="fee_bps" type="number | null">
  Fee basis points (builder-level setting).
</ResponseField>

<ResponseField name="affiliate_address" type="string | null">
  Fee recipient address (builder-level setting).
</ResponseField>

<RequestExample>
```bash Managed — EOA (no external wallet)
curl -X POST "https://api.parsecapi.com/api/v1/builder/onboard" \
  -H "X-API-Key: pk_live_YOUR_BUILDER_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "customer_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "exchange": "polymarket",
    "mode": "managed"
  }'
```
```bash Managed — Safe (external wallet)
curl -X POST "https://api.parsecapi.com/api/v1/builder/onboard" \
  -H "X-API-Key: pk_live_YOUR_BUILDER_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "customer_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "exchange": "polymarket",
    "mode": "managed",
    "wallet_type": "safe",
    "eoa_address": "0x1234567890abcdef1234567890abcdef12345678"
  }'
```
```bash Self Polymarket
curl -X POST "https://api.parsecapi.com/api/v1/builder/onboard" \
  -H "X-API-Key: pk_live_YOUR_BUILDER_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "customer_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "exchange": "polymarket",
    "mode": "self",
    "clob_api_key": "your-clob-api-key",
    "clob_api_secret": "your-clob-api-secret",
    "clob_api_passphrase": "your-clob-passphrase",
    "private_key": "0xYourEthPrivateKey"
  }'
```
```bash Self Kalshi
curl -X POST "https://api.parsecapi.com/api/v1/builder/onboard" \
  -H "X-API-Key: pk_live_YOUR_BUILDER_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "customer_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "exchange": "kalshi",
    "mode": "self",
    "api_key_id": "kalshi_key_id",
    "private_key": "-----BEGIN RSA PRIVATE KEY-----\n..."
  }'
```
</RequestExample>

<ResponseExample>
```json Managed EOA onboard (200 OK)
{
  "customer_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "exchange": "polymarket",
  "mode": "managed",
  "status": "complete",
  "eoa_address": "0x1234567890abcdef1234567890abcdef12345678",
  "safe_address": null,
  "linked_exchanges": ["polymarket"],
  "steps_completed": ["wallet_eoa_created", "exchange_linked"],
  "wallet": {
    "eoa_address": "0x1234567890abcdef1234567890abcdef12345678",
    "privy_wallet_id": "wallet_abc123",
    "wallet_type": "eoa",
    "chain_id": 137,
    "created_at": "2026-02-27T12:00:00Z"
  },
  "fee_escrow_enabled": false
}
```
```json Managed Safe onboard (200 OK)
{
  "customer_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "exchange": "polymarket",
  "mode": "managed",
  "status": "complete",
  "eoa_address": "0x1234567890abcdef1234567890abcdef12345678",
  "safe_address": "0xabcdef1234567890abcdef1234567890abcdef12",
  "linked_exchanges": ["polymarket"],
  "steps_completed": ["external_eoa_provided", "wallet_safe_created", "exchange_linked"],
  "wallet": {
    "eoa_address": "0x1234567890abcdef1234567890abcdef12345678",
    "privy_wallet_id": "",
    "safe_address": "0xabcdef1234567890abcdef1234567890abcdef12",
    "wallet_type": "safe",
    "chain_id": 137,
    "created_at": "2026-02-27T12:00:00Z"
  },
  "fee_escrow_enabled": false
}
```
```json Self onboard (200 OK)
{
  "customer_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "exchange": "kalshi",
  "mode": "self",
  "status": "complete",
  "linked_exchanges": ["polymarket", "kalshi"],
  "steps_completed": ["credentials_validated", "credentials_stored"],
  "fee_escrow_enabled": false
}
```
</ResponseExample>
